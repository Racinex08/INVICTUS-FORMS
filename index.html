<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <!-- Esta etiqueta META es la clave para la compatibilidad con todos los m√≥viles (iOS y Android). -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">
    <link rel="manifest" href="manifest.json">
    <title>INVICTUS JUVENIL 2026</title>
    <!-- Script para el efecto de confeti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Estilos CSS integrados para la presentaci√≥n -->
    <style>
        :root {
            --primary-color: #007bff;
            --primary-hover: #0056b3;
            --secondary-color: #6c757d;
            --secondary-hover: #5a6268;
            --background-color: #f0f2f5;
            --container-bg: #ffffff;
            --text-color: #333;
            --label-color: #555;
            --border-color: #ccc;
        }

        body {
            font-family: Tahoma, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: radial-gradient(125% 125% at -2% 101%,
                    rgba(245, 87, 2, 1) 10.5%,
                    rgba(245, 120, 2, 1) 16%,
                    rgba(245, 140, 2, 1) 17.5%,
                    rgba(245, 170, 100, 1) 25%,
                    rgba(238, 174, 202, 1) 40%,
                    rgba(202, 179, 214, 1) 65%,
                    rgba(148, 201, 233, 1) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem 0;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--container-bg);
            color: var(--text-color);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 420px;
            width: 95%;
            box-sizing: border-box;
            position: relative;
        }

        .hidden {
            display: none;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #666;
            margin-top: 0;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .welcome-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
        }

        .btn,
        .btn-primary,
        .btn-secondary {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            box-sizing: border-box;
        }

        .btn:active,
        .btn-primary:active,
        .btn-secondary:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--secondary-hover);
        }

        #checkBtn {
            background-color: #28a745;
            color: white;
        }

        #checkBtn:hover {
            background-color: #218838;
        }

        .form-group {
            margin-bottom: 1.25rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--label-color);
            font-weight: bold;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
        }

        .phone-group,
        .date-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .phone-group select {
            width: auto;
            flex-basis: 35%;
        }

        .phone-group input {
            flex-basis: 65%;
        }

        .form-actions {
            margin-top: 2rem;
        }

        .loader {
            display: none;
            flex-direction: column;
            /* Alinea el SVG y el texto verticalmente */
            align-items: center;
            justify-content: center;
            gap: 1rem;
            color: var(--text-color);
        }

        .na-btn {
            display: block;
            width: 100%;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            padding: 0.6rem;
            border-radius: 5px;
            margin-top: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            color: #333;
        }

        .status-message {
            padding: 2rem 0;
        }

        .status-icon {
            font-size: 4rem;
            display: block;
            margin-bottom: 1rem;
        }

        .status-title {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .status-detail {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        #langToggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            color: #555;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            z-index: 100;
        }

        .confirmation-details {
            text-align: left;
            background-color: #f9f9f9;
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border: 1px solid #eee;
        }

        .confirmation-details p {
            border-bottom: 1px solid #eee;
            padding-bottom: 0.75rem;
            margin: 0 0 0.75rem 0;
            display: flex;
            justify-content: space-between;
        }

        .confirmation-details p:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .confirmation-details strong {
            color: var(--text-color);
            margin-right: 1rem;
        }

        .confirmation-details span {
            color: #555;
            word-break: break-all;
        }

        .confirmation-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        @media (min-width: 480px) {
            .confirmation-actions {
                flex-direction: row;
            }
        }

        .back-button-styled {
            all: unset;
            box-sizing: border-box;
            position: absolute;
            top: 1rem;
            left: 1rem;
            display: inline-flex;
            height: 3rem;
            width: 3rem;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            font-family: Segoe UI, sans-serif;
            font-size: 1.2rem;
            font-weight: 640;
            color: #1d1d1f;
            z-index: 10;
        }

        .back-button-styled .button-bg {
            border-color: rgba(255, 208, 116);
            background-color: rgba(255, 208, 116);
        }

        .back-button-styled .button-inner,
        .back-button-styled .button-inner-hover,
        .back-button-styled .button-inner-static {
            pointer-events: none;
            display: block;
        }

        .back-button-styled .button-inner {
            position: relative;
        }

        .back-button-styled .button-inner-hover {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transform: translateY(70%);
        }

        .back-button-styled .button-bg {
            overflow: hidden;
            border-radius: 2rem;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: scale(1);
            transition: transform 1.8s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .back-button-styled .button-bg,
        .back-button-styled .button-bg-layer,
        .back-button-styled .button-bg-layers {
            display: block;
        }

        .back-button-styled .button-bg-layers {
            position: absolute;
            left: 50%;
            transform: translate(-50%);
            top: -60%;
            aspect-ratio: 1 / 1;
            width: max(200%, 10rem);
        }

        .back-button-styled .button-bg-layer {
            border-radius: 9999px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: scale(0);
        }

        .back-button-styled .button-bg-layer.-purple {
            background-color: rgba(163, 116, 255);
        }

        .back-button-styled .button-bg-layer.-turquoise {
            background-color: rgba(23, 241, 209);
        }

        .back-button-styled .button-bg-layer.-yellow {
            --tw-bg-opacity: 1;
            background-color: rgba(255, 208, 116, var(--tw-bg-opacity));
        }

        .back-button-styled:hover .button-inner-static {
            opacity: 0;
            transform: translateY(-70%);
            transition: transform 1.4s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.3s linear;
        }

        .back-button-styled:hover .button-inner-hover {
            opacity: 1;
            transform: translateY(0);
            transition: transform 1.4s cubic-bezier(0.19, 1, 0.22, 1), opacity 1.4s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .back-button-styled:hover .button-bg-layer {
            transition: transform 1.3s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.3s linear;
        }

        .back-button-styled:hover .button-bg-layer-1 {
            transform: scale(1);
        }

        .back-button-styled:hover .button-bg-layer-2 {
            transition-delay: 0.1s;
            transform: scale(1);
        }

        .back-button-styled:hover .button-bg-layer-3 {
            transition-delay: 0.2s;
            transform: scale(1);
        }

        .uiverse-yes {
            --duration: 7s;
            --easing: linear;
            --c-color-1: rgba(245, 160, 2, 0.7);
            --c-color-2: #1a23ff;
            --c-color-3: #e21bda;
            --c-color-4: rgba(245, 120, 2, 0.7);
            --c-shadow: rgba(245, 124, 2, 0.5);
            --c-shadow-inset-top: rgba(245, 124, 2, 0.9);
            --c-shadow-inset-bottom: rgba(245, 170, 100, 0.8);
            --c-radial-inner: #F57C02;
            --c-radial-outer: #F5A602;
            --c-color: #fff;
            -webkit-tap-highlight-color: transparent;
            -webkit-appearance: none;
            outline: none;
            position: relative;
            cursor: pointer;
            border: none;
            display: table;
            border-radius: 24px;
            padding: 0;
            margin: 0;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
            letter-spacing: 0.02em;
            line-height: 1.5;
            color: var(--c-color);
            background: radial-gradient(circle, var(--c-radial-inner), var(--c-radial-outer) 80%);
            box-shadow: 0 0 14px var(--c-shadow);
            width: 100%;
        }

        .uiverse-yes:before {
            content: "";
            pointer-events: none;
            position: absolute;
            z-index: 3;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            border-radius: 24px;
            box-shadow: inset 0 3px 12px var(--c-shadow-inset-top), inset 0 -3px 4px var(--c-shadow-inset-bottom);
        }

        .uiverse-yes .wrapper {
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            overflow: hidden;
            border-radius: 24px;
            min-width: 132px;
            padding: 12px 0;
        }

        .uiverse-yes .wrapper span {
            display: inline-block;
            position: relative;
            z-index: 1;
        }

        .uiverse-yes:hover {
            --duration: 1400ms;
        }

        .uiverse-yes .wrapper .circle {
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            filter: blur(var(--blur, 8px));
            background: var(--background, transparent);
            transform: translate(var(--x, 0), var(--y, 0)) translateZ(0);
            animation: var(--animation, none) var(--duration) var(--easing) infinite;
        }

        .uiverse-yes .wrapper .circle.circle-1,
        .uiverse-yes .wrapper .circle.circle-9,
        .uiverse-yes .wrapper .circle.circle-10 {
            --background: var(--c-color-4);
        }

        .uiverse-yes .wrapper .circle.circle-3,
        .uiverse-yes .wrapper .circle.circle-4 {
            --background: var(--c-color-2);
            --blur: 14px;
        }

        .uiverse-yes .wrapper .circle.circle-5,
        .uiverse-yes .wrapper .circle.circle-6 {
            --background: var(--c-color-3);
            --blur: 16px;
        }

        .uiverse-yes .wrapper .circle.circle-2,
        .uiverse-yes .wrapper .circle.circle-7,
        .uiverse-yes .wrapper .circle.circle-8,
        .uiverse-yes .wrapper .circle.circle-11,
        .uiverse-yes .wrapper .circle.circle-12 {
            --background: var(--c-color-1);
            --blur: 12px;
        }

        .uiverse-yes .wrapper .circle.circle-1 {
            --x: 0;
            --y: -40px;
            --animation: circle-1;
        }

        .uiverse-yes .wrapper .circle.circle-2 {
            --x: 92px;
            --y: 8px;
            --animation: circle-2;
        }

        .uiverse-yes .wrapper .circle.circle-3 {
            --x: -12px;
            --y: -12px;
            --animation: circle-3;
        }

        .uiverse-yes .wrapper .circle.circle-4 {
            --x: 80px;
            --y: -12px;
            --animation: circle-4;
        }

        .uiverse-yes .wrapper .circle.circle-5 {
            --x: 12px;
            --y: -4px;
            --animation: circle-5;
        }

        .uiverse-yes .wrapper .circle.circle-6 {
            --x: 56px;
            --y: 16px;
            --animation: circle-6;
        }

        .uiverse-yes .wrapper .circle.circle-7 {
            --x: 8px;
            --y: 28px;
            --animation: circle-7;
        }

        .uiverse-yes .wrapper .circle.circle-8 {
            --x: 28px;
            --y: -4px;
            --animation: circle-8;
        }

        .uiverse-yes .wrapper .circle.circle-9 {
            --x: 20px;
            --y: -12px;
            --animation: circle-9;
        }

        .uiverse-yes .wrapper .circle.circle-10 {
            --x: 64px;
            --y: 16px;
            --animation: circle-10;
        }

        .uiverse-yes .wrapper .circle.circle-11 {
            --x: 4px;
            --y: 4px;
            --animation: circle-11;
        }

        .uiverse-yes .wrapper .circle.circle-12 {
            --blur: 14px;
            --x: 52px;
            --y: 4px;
            --animation: circle-12;
        }

        .uiverse-no {
            --duration: 7s;
            --easing: linear;
            --c-color-1: #ffd58c;
            --c-color-2: #69a5ff;
            --c-color-3: #c29fff;
            --c-color-4: rgba(140, 232, 255, 0.7);
            --c-shadow: rgba(99, 85, 255, 0.59);
            --c-shadow-inset-top: rgba(132, 156, 255, 0.9);
            --c-shadow-inset-bottom: rgba(62, 145, 255, 0.614);
            --c-radial-inner: #2637a4;
            --c-radial-outer: #5f64ea;
            --c-color: #ffffff;
            -webkit-tap-highlight-color: transparent;
            -webkit-appearance: none;
            outline: none;
            position: relative;
            cursor: pointer;
            border: none;
            display: table;
            border-radius: 24px;
            padding: 0;
            margin: 0;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
            letter-spacing: 0.05em;
            line-height: 1.5;
            color: var(--c-color);
            background: radial-gradient(circle, var(--c-radial-inner), var(--c-radial-outer) 80%);
            box-shadow: 0 0 14px var(--c-shadow);
            width: 100%;
        }

        .uiverse-no:before {
            content: "";
            pointer-events: none;
            position: absolute;
            z-index: 3;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            border-radius: 28px;
            box-shadow: inset 0 3px 12px var(--c-shadow-inset-top), inset 0 -3px 4px var(--c-shadow-inset-bottom);
        }

        .uiverse-no .wrapper {
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            overflow: hidden;
            border-radius: 26px;
            min-width: 132px;
            padding: 12px 0;
        }

        .uiverse-no .wrapper span {
            display: inline-block;
            position: relative;
            z-index: 1;
        }

        .uiverse-no:hover {
            --duration: 1400ms;
        }

        .uiverse-no .wrapper .circle {
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            filter: blur(var(--blur, 8px));
            background: var(--background, transparent);
            transform: translate(var(--x, 0), var(--y, 0)) translateZ(0);
            animation: var(--animation, none) var(--duration) var(--easing) infinite;
        }

        .uiverse-no .wrapper .circle.circle-1,
        .uiverse-no .wrapper .circle.circle-9,
        .uiverse-no .wrapper .circle.circle-10 {
            --background: var(--c-color-4);
        }

        .uiverse-no .wrapper .circle.circle-3,
        .uiverse-no .wrapper .circle.circle-4 {
            --background: var(--c-color-2);
            --blur: 14px;
        }

        .uiverse-no .wrapper .circle.circle-5,
        .uiverse-no .wrapper .circle.circle-6 {
            --background: var(--c-color-3);
            --blur: 16px;
        }

        .uiverse-no .wrapper .circle.circle-2,
        .uiverse-no .wrapper .circle.circle-7,
        .uiverse-no .wrapper .circle.circle-8,
        .uiverse-no .wrapper .circle.circle-11,
        .uiverse-no .wrapper .circle.circle-12 {
            --background: var(--c-color-1);
            --blur: 12px;
        }

        .uiverse-no .wrapper .circle.circle-1 {
            --x: 0;
            --y: -40px;
            --animation: circle-1;
        }

        .uiverse-no .wrapper .circle.circle-2 {
            --x: 92px;
            --y: 8px;
            --animation: circle-2;
        }

        .uiverse-no .wrapper .circle.circle-3 {
            --x: -12px;
            --y: -12px;
            --animation: circle-3;
        }

        .uiverse-no .wrapper .circle.circle-4 {
            --x: 80px;
            --y: -12px;
            --animation: circle-4;
        }

        .uiverse-no .wrapper .circle.circle-5 {
            --x: 12px;
            --y: -4px;
            --animation: circle-5;
        }

        .uiverse-no .wrapper .circle.circle-6 {
            --x: 56px;
            --y: 16px;
            --animation: circle-6;
        }

        .uiverse-no .wrapper .circle.circle-7 {
            --x: 8px;
            --y: 28px;
            --animation: circle-7;
        }

        .uiverse-no .wrapper .circle.circle-8 {
            --x: 28px;
            --y: -4px;
            --animation: circle-8;
        }

        .uiverse-no .wrapper .circle.circle-9 {
            --x: 20px;
            --y: -12px;
            --animation: circle-9;
        }

        .uiverse-no .wrapper .circle.circle-10 {
            --x: 64px;
            --y: 16px;
            --animation: circle-10;
        }

        .uiverse-no .wrapper .circle.circle-11 {
            --x: 4px;
            --y: 4px;
            --animation: circle-11;
        }

        .uiverse-no .wrapper .circle.circle-12 {
            --blur: 14px;
            --x: 52px;
            --y: 4px;
            --animation: circle-12;
        }

        @keyframes circle-1 {
            33% {
                transform: translate(0px, 16px) translateZ(0);
            }

            66% {
                transform: translate(12px, 64px) translateZ(0);
            }
        }

        @keyframes circle-2 {
            33% {
                transform: translate(80px, -10px) translateZ(0);
            }

            66% {
                transform: translate(72px, -48px) translateZ(0);
            }
        }

        @keyframes circle-3 {
            33% {
                transform: translate(20px, 12px) translateZ(0);
            }

            66% {
                transform: translate(12px, 4px) translateZ(0);
            }
        }

        @keyframes circle-4 {
            33% {
                transform: translate(76px, -12px) translateZ(0);
            }

            66% {
                transform: translate(112px, -8px) translateZ(0);
            }
        }

        @keyframes circle-5 {
            33% {
                transform: translate(84px, 28px) translateZ(0);
            }

            66% {
                transform: translate(40px, -32px) translateZ(0);
            }
        }

        @keyframes circle-6 {
            33% {
                transform: translate(28px, -16px) translateZ(0);
            }

            66% {
                transform: translate(76px, -56px) translateZ(0);
            }
        }

        @keyframes circle-7 {
            33% {
                transform: translate(8px, 28px) translateZ(0);
            }

            66% {
                transform: translate(20px, -60px) translateZ(0);
            }
        }

        @keyframes circle-8 {
            33% {
                transform: translate(32px, -4px) translateZ(0);
            }

            66% {
                transform: translate(56px, -20px) translateZ(0);
            }
        }

        @keyframes circle-9 {
            33% {
                transform: translate(20px, -12px) translateZ(0);
            }

            66% {
                transform: translate(80px, -8px) translateZ(0);
            }
        }

        @keyframes circle-10 {
            33% {
                transform: translate(68px, 20px) translateZ(0);
            }

            66% {
                transform: translate(100px, 28px) translateZ(0);
            }
        }

        @keyframes circle-11 {
            33% {
                transform: translate(4px, 4px) translateZ(0);
            }

            66% {
                transform: translate(68px, 20px) translateZ(0);
            }
        }

        @keyframes circle-12 {
            33% {
                transform: translate(56px, 0px) translateZ(0);
            }

            66% {
                transform: translate(60px, -32px) translateZ(0);
            }
        }

        /* --- INICIO ESTILOS NUEVO LOADER --- */
        .loader-svg {
            /* Renombrado para evitar conflictos */
            width: 6em;
            height: 6em;
        }

        .loader-ring {
            animation: ringA 2s linear infinite;
        }

        .loader-ring-a {
            stroke: #9708F4;
        }

        .loader-ring-b {
            animation-name: ringB;
            stroke: #5E14E4;
        }

        .loader-ring-c {
            animation-name: ringC;
            stroke: #9708F4;
        }

        .loader-ring-d {
            animation-name: ringD;
            stroke: #5E14E4;
        }

        @keyframes ringA {

            from,
            4% {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -330;
            }

            12% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -335;
            }

            32% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -595;
            }

            40%,
            54% {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -660;
            }

            62% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -665;
            }

            82% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -925;
            }

            90%,
            to {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -990;
            }
        }

        @keyframes ringB {

            from,
            12% {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -110;
            }

            20% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -115;
            }

            40% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -195;
            }

            48%,
            62% {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            70% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            90% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -305;
            }

            98%,
            to {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -330;
            }
        }

        @keyframes ringC {
            from {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: 0;
            }

            8% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -5;
            }

            28% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -175;
            }

            36%,
            58% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            66% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            86% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -395;
            }

            94%,
            to {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -440;
            }
        }

        @keyframes ringD {

            from,
            8% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: 0;
            }

            16% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -5;
            }

            36% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -175;
            }

            44%,
            50% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            58% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            78% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -395;
            }

            86%,
            to {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -440;
            }
        }

        /* --- FIN ESTILOS NUEVO LOADER --- */
    </style>
</head>

<body>

    <!-- Centro de Notificaciones -->
    <div id="notificationCenter" style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        <div id="bellBtn"
            style="background: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); position: relative;">
            <span style="font-size: 24px;">üîî</span>
            <div id="notifRedDot" class="hidden"
                style="position: absolute; top: 0; right: 0; background: red; width: 15px; height: 15px; border-radius: 50%; border: 2px solid white;">
            </div>
        </div>

        <!-- Listado de Notificaciones -->
        <div id="notifList" class="hidden"
            style="position: absolute; top: 60px; right: 0; background: white; width: 280px; max-height: 400px; overflow-y: auto; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); padding: 15px; border: 1px solid #eee;">
            <h4 style="margin-top: 0; border-bottom: 2px solid #f5f5f5; padding-bottom: 8px; color: #333;">
                Notificaciones de la Semana</h4>

            <!-- Bot√≥n de Activaci√≥n Manual -->
            <button id="activateNotifBtn" onclick="requestNotificationPermission()"
                style="width: 100%; margin-bottom: 10px; padding: 10px; background-color: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 5px;">
                üîî Activar Alertas en este Celular
            </button>

            <div id="notifItems">
                <p style="color: #888; font-size: 14px;">No hay alertas nuevas...</p>
            </div>
        </div>
    </div>

    <!-- Pantalla de Bienvenida -->
    <div class="container" id="welcomeScreen">
        <button id="langToggle">ES</button>
        <div class="logo">INVICTUS JUVENIL</div>
        <p class="subtitle" data-translate="welcomeTitle">¬øEs tu Primera Vez en INVICTUS JUVENIL? ü§î</p>
        <div class="welcome-buttons">
            <button class="uiverse-yes" id="yesBtn">
                <div class="wrapper">
                    <span data-translate="yesBtnText">üòÄ S√≠, es mi primera vez</span>
                    <div class="circle circle-12"></div>
                    <div class="circle circle-11"></div>
                    <div class="circle circle-10"></div>
                    <div class="circle circle-9"></div>
                    <div class="circle circle-8"></div>
                    <div class="circle circle-7"></div>
                    <div class="circle circle-6"></div>
                    <div class="circle circle-5"></div>
                    <div class="circle circle-4"></div>
                    <div class="circle circle-3"></div>
                    <div class="circle circle-2"></div>
                    <div class="circle circle-1"></div>
                </div>
            </button>
            <button class="uiverse-no" id="noBtn">
                <div class="wrapper">
                    <span data-translate="noBtnText">üòé No, ya he venido antes</span>
                    <div class="circle circle-12"></div>
                    <div class="circle circle-11"></div>
                    <div class="circle circle-10"></div>
                    <div class="circle circle-9"></div>
                    <div class="circle circle-8"></div>
                    <div class="circle circle-7"></div>
                    <div class="circle circle-6"></div>
                    <div class="circle circle-5"></div>
                    <div class="circle circle-4"></div>
                    <div class="circle circle-3"></div>
                    <div class="circle circle-2"></div>
                    <div class="circle circle-1"></div>
                </div>
            </button>
        </div>
    </div>

    <!-- Formulario de Registro -->
    <div class="container hidden" id="registrationForm">
        <button id="langToggle">ES</button>
        <button class="back-button-styled" id="backFromRegister">
            <span class="button-bg">
                <span class="button-bg-layers">
                    <span class="button-bg-layer button-bg-layer-1 -purple"></span>
                    <span class="button-bg-layer button-bg-layer-2 -turquoise"></span>
                    <span class="button-bg-layer button-bg-layer-3 -yellow"></span>
                </span>
            </span>
            <span class="button-inner">
                <span class="button-inner-static">‚¨Ö</span>
                <span class="button-inner-hover">‚¨Ö</span>
            </span>
        </button>
        <div class="logo">INVICTUS JUVENIL</div>
        <p class="subtitle" data-translate="regSubtitle">¬°Bienvenido a la familia INVICTUS! ü§ó</p>
        <form id="regForm">
            <div class="form-group">
                <label for="invitedBy" data-translate="labelInvitedBy">üë• Invitado Por</label>
                <input type="text" id="invitedBy" data-translate-placeholder="placeholderInvitedBy">
                <button type="button" class="na-btn" id="naBtnInvitedBy" data-translate="naBtn">No aplica</button>
            </div>
            <div class="form-group">
                <label for="fullName" data-translate="labelFullName">üè∑Ô∏è Nombre y Apellido</label>
                <input type="text" id="fullName" required data-translate-placeholder="placeholderFullName">
            </div>
            <div class="form-group">
                <label for="gender" data-translate="labelGender">‚ôÄÔ∏è‚ôÇÔ∏è G√©nero</label>
                <select id="gender" required>
                    <option value="" data-translate="genderDefault">Selecciona...</option>
                    <option value="M" data-translate="genderM">üë® Masculino</option>
                    <option value="F" data-translate="genderF">üë© Femenino</option>
                </select>
            </div>
            <div class="form-group">
                <label for="phone" data-translate="labelPhone">üì± Tel√©fono</label>
                <div class="phone-group">
                    <select id="countryCode" required></select>
                    <input type="tel" id="phone" required data-translate-placeholder="placeholderPhone">
                </div>
                <button type="button" class="na-btn" id="naBtnPhone" data-translate="naBtn">No aplica</button>
            </div>
            <div class="form-group">
                <label for="birthDate" data-translate="labelBirthDate">üéÇ Fecha de Nacimiento</label>
                <div class="date-group">
                    <select id="birthDay" required></select>
                    <select id="birthMonth" required></select>
                    <select id="birthYear" required></select>
                </div>
            </div>
            <div class="form-group">
                <label for="age" data-translate="labelAge">üî¢ Edad</label>
                <input type="number" id="age" required min="1" max="99" oninput="this.value=this.value.slice(0,2)"
                    data-translate-placeholder="placeholderAge">
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary" id="registerBtn" data-translate="registerBtnText">üöÄ
                    ¬°Registrarme!</button>
                <div class="loader" id="registerLoader">
                    <svg viewBox="0 0 240 240" height="240" width="240" class="loader-svg">
                        <circle stroke-linecap="round" stroke-dashoffset="-330" stroke-dasharray="0 660"
                            stroke-width="20" stroke="#000" fill="none" r="105" cy="120" cx="120"
                            class="loader-ring loader-ring-a"></circle>
                        <circle stroke-linecap="round" stroke-dashoffset="-110" stroke-dasharray="0 220"
                            stroke-width="20" stroke="#000" fill="none" r="35" cy="120" cx="120"
                            class="loader-ring loader-ring-b"></circle>
                        <circle stroke-linecap="round" stroke-dasharray="0 440" stroke-width="20" stroke="#000"
                            fill="none" r="70" cy="120" cx="85" class="loader-ring loader-ring-c"></circle>
                        <circle stroke-linecap="round" stroke-dasharray="0 440" stroke-width="20" stroke="#000"
                            fill="none" r="70" cy="120" cx="155" class="loader-ring loader-ring-d"></circle>
                    </svg>
                    <span data-translate="registerLoaderText"></span>
                </div>
            </div>
        </form>
    </div>

    <!-- Formulario de Asistencia -->
    <div class="container hidden" id="attendanceForm">
        <button id="langToggle">ES</button>
        <button class="back-button-styled" id="backFromAttendance">
            <span class="button-bg">
                <span class="button-bg-layers">
                    <span class="button-bg-layer button-bg-layer-1 -purple"></span>
                    <span class="button-bg-layer button-bg-layer-2 -turquoise"></span>
                    <span class="button-bg-layer button-bg-layer-3 -yellow"></span>
                </span>
            </span>
            <span class="button-inner">
                <span class="button-inner-static">‚¨Ö</span>
                <span class="button-inner-hover">‚¨Ö</span>
            </span>
        </button>
        <div class="logo">INVICTUS JUVENIL</div>
        <p class="subtitle" data-translate="attSubtitle">¬°Qu√© bueno verte de nuevo! üòä</p>
        <form id="attForm">
            <div class="form-group">
                <label for="fullNameCheck" data-translate="labelFullNameCheck">üè∑Ô∏è Nombre y Apellido</label>
                <input type="text" id="fullNameCheck" required data-translate-placeholder="placeholderFullNameCheck">
            </div>
            <div class="form-group">
                <label for="phoneCheck" data-translate="labelPhoneCheck">üì± Tu N√∫mero de Tel√©fono (Opcional)</label>
                <div class="phone-group">
                    <select id="countryCodeCheck" required></select>
                    <input type="tel" id="phoneCheck" data-translate-placeholder="placeholderPhoneCheck">
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-secondary" id="checkBtn" data-translate="checkBtnText">üîç Verificar
                    Asistencia</button>
                <div class="loader" id="attendanceLoader">
                    <svg viewBox="0 0 240 240" height="240" width="240" class="loader-svg">
                        <circle stroke-linecap="round" stroke-dashoffset="-330" stroke-dasharray="0 660"
                            stroke-width="20" stroke="#000" fill="none" r="105" cy="120" cx="120"
                            class="loader-ring loader-ring-a"></circle>
                        <circle stroke-linecap="round" stroke-dashoffset="-110" stroke-dasharray="0 220"
                            stroke-width="20" stroke="#000" fill="none" r="35" cy="120" cx="120"
                            class="loader-ring loader-ring-b"></circle>
                        <circle stroke-linecap="round" stroke-dasharray="0 440" stroke-width="20" stroke="#000"
                            fill="none" r="70" cy="120" cx="85" class="loader-ring loader-ring-c"></circle>
                        <circle stroke-linecap="round" stroke-dasharray="0 440" stroke-width="20" stroke="#000"
                            fill="none" r="70" cy="120" cx="155" class="loader-ring loader-ring-d"></circle>
                    </svg>
                    <span data-translate="attendanceLoaderText"></span>
                </div>
            </div>
        </form>
    </div>

    <!-- Pantalla de Confirmaci√≥n de Datos -->
    <div class="container hidden" id="confirmationScreen">
        <button id="langToggle">ES</button>
        <h2 data-translate="confirmTitle">Verifica tu Informaci√≥n</h2>
        <p class="subtitle" data-translate="confirmSubtitle">¬øEst√°n correctos estos datos?</p>
        <div class="confirmation-details">
            <p><strong data-translate="labelFullName"></strong> <span id="confirmName"></span></p>
            <p><strong data-translate="labelGender"></strong> <span id="confirmGender"></span></p>
            <p><strong data-translate="labelPhone"></strong> <span id="confirmPhone"></span></p>
            <p><strong data-translate="labelBirthDate"></strong> <span id="confirmBirthDate"></span></p>
            <p><strong data-translate="labelAge"></strong> <span id="confirmAge"></span></p>
            <p><strong data-translate="labelInvitedBy"></strong> <span id="confirmInvitedBy"></span></p>
        </div>
        <div class="confirmation-actions">
            <button class="btn-secondary" id="confirmNoBtn" data-translate="confirmNo">No, corregir</button>
            <button class="btn-primary" id="confirmYesBtn" data-translate="confirmYes">S√≠, registrar</button>
        </div>
    </div>

    <!-- Mensaje de √âxito -->
    <div class="container hidden" id="successMessage">
        <button id="langToggle">ES</button>
        <div class="status-message success-message">
            <span class="status-icon" id="successIcon">üéâ</span>
            <h2 class="status-title" id="successTitle"></h2>
            <p class="status-detail" id="successDetail"></p>
            <button class="btn-primary" id="backToWelcome" data-translate="backToWelcomeText">üè† Volver al
                Inicio</button>
        </div>
    </div>

    <!-- Mensaje de Error -->
    <div class="container hidden" id="errorMessage">
        <button id="langToggle">ES</button>
        <div class="status-message error-message">
            <span class="status-icon">üòî</span>
            <h2 class="status-title" data-translate="errorTitle">¬°Oops!</h2>
            <p class="status-detail" id="errorDetail"></p>
            <button class="btn-primary" id="backToWelcomeError" data-translate="backToWelcomeErrorText">üè† Volver al
                Inicio</button>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>

    <script>
        // Configuraci√≥n de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAQxRxoH8UdnC5t5nxAbPUemwT-V3peKfM",
            authDomain: "invictus-forms.firebaseapp.com",
            projectId: "invictus-forms",
            storageBucket: "invictus-forms.firebasestorage.app",
            messagingSenderId: "175025854516",
            appId: "1:175025854516:web:d0256e3d40de07172b5261",
            measurementId: "G-HDTKK6J61G"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const messaging = firebase.messaging();

        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyR-PBjbDR47hj5mP5e3ubYfn_QXJxPxjKAg6ciXFmsnTXtuzPu7BUGOsS53Bl06DCNKQ/exec";

        const translations = {
            es: {
                welcomeTitle: "¬øEs tu Primera Vez en INVICTUS JUVENIL? ü§î",
                yesBtnText: "üòÄ S√≠, es mi primera vez",
                noBtnText: "üòé No, ya he venido antes",
                regSubtitle: "¬°Bienvenido a la familia INVICTUS! ü§ó",
                labelInvitedBy: "üë• Invitado Por",
                naBtn: "No aplica",
                labelFullName: "üè∑Ô∏è Nombre y Apellido:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è G√©nero:",
                genderDefault: "Selecciona...",
                genderM: "üë® Masculino",
                genderF: "üë© Femenino",
                labelPhone: "üì± Tel√©fono:",
                labelBirthDate: "üéÇ Fecha de Nacimiento:",
                labelAge: "üî¢ Edad:",
                registerBtnText: "üöÄ ¬°Registrarme!",
                registerLoaderText: "Procesando la Informaci√≥n...",
                attSubtitle: "¬°Qu√© bueno verte de nuevo! üòä",
                labelFullNameCheck: "üè∑Ô∏è Nombre y Apellido:",
                labelPhoneCheck: "üì± Tu N√∫mero de Tel√©fono (Opcional)",
                checkBtnText: "üîç Verificar Asistencia",
                attendanceLoaderText: "Procesando la Informaci√≥n... ",
                successTitle: "¬°Excelente!",
                welcomeBackTitle: "¬°Qu√© bueno verte!",
                errorTitle: "¬°Oops!",
                ageMismatchError: "La edad no coincide con la fecha de nacimiento. Por favor, verifica los datos.",
                backToWelcomeText: "üè† Volver al Inicio",
                backToWelcomeErrorText: "üè† Volver al Inicio",
                registrationSuccess: "¬°Felicidades y Bienvenido a Invictus Juvenil! Dios te bendiga {name}. ‚ú®\n\nüìñ Jerem√≠as 29:11 - 'Porque yo s√© los pensamientos que tengo acerca de vosotros, dice Jehov√°, pensamientos de paz, y no de mal, para daros el fin que esper√°is.'",
                registrationWelcomeBack: "¬°Qu√© alegr√≠a verte de nuevo, {name}! Tu asistencia ha sido marcada.",
                attendanceSuccess: "¬°Qu√© bueno verte de nuevo, Dios te bendiga {name}! ü§ó\n\nüìñ Filipenses 4:13 - 'Todo lo puedo en Cristo que me fortalece.'",
                attendanceError: "No pudimos encontrar una coincidencia. Por favor, verifica tus datos o reg√≠strate si es tu primera vez.",
                offlineTitle: "Registro Guardado üíæ",
                offlineDetail: "No tienes conexi√≥n a internet. Guardamos tus datos y los enviaremos autom√°ticamente cuando te conectes. ¬°Nos vemos!",
                syncNotification: "Se enviaron tus registros pendientes. ¬°Gracias!",
                placeholderInvitedBy: "¬øQui√©n te invit√≥?",
                placeholderFullName: "Tu nombre completo",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "El nombre con el que te registraste",
                placeholderPhoneCheck: "Opcional, para ser m√°s preciso",
                confirmTitle: "Verifica tu Informaci√≥n",
                confirmSubtitle: "¬øEst√°n correctos estos datos?",
                confirmYes: "S√≠, registrar",
                confirmNo: "No, corregir",
                dateSelects: { day: "D√≠a", month: "Mes", year: "A√±o" }
            },
            en: {
                welcomeTitle: "Is this your First Time at INVICTUS YOUTH? ü§î",
                yesBtnText: "üòÄ Yes, it's my first time",
                noBtnText: "üòé No, I've been here before",
                regSubtitle: "Welcome to the INVICTUS family! ü§ó",
                labelInvitedBy: "üë• Invited By",
                naBtn: "N/A",
                labelFullName: "üè∑Ô∏è Full Name:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è Gender:",
                genderDefault: "Select...",
                genderM: "üë® Male",
                genderF: "üë© Female",
                labelPhone: "üì± Phone:",
                labelBirthDate: "üéÇ Date of Birth:",
                labelAge: "üî¢ Age:",
                registerBtnText: "üöÄ Register Me!",
                registerLoaderText: "Processing Information...",
                attSubtitle: "Great to see you again! üòä",
                labelFullNameCheck: "üè∑Ô∏è Full Name:",
                labelPhoneCheck: "üì± Your Phone Number (Optional)",
                checkBtnText: "üîç Check Attendance",
                attendanceLoaderText: "Processing Information...",
                successTitle: "Excellent!",
                welcomeBackTitle: "Great to see you!",
                errorTitle: "Oops!",
                ageMismatchError: "The age does not match the date of birth. Please check your data.",
                backToWelcomeText: "üè† Back to Start",
                backToWelcomeErrorText: "üè† Back to Start",
                registrationSuccess: "Welcome to the family, {name}! God has great plans for you ‚ú®",
                registrationWelcomeBack: "So glad to see you again, {name}! Your attendance has been marked.",
                attendanceSuccess: "God loves you, {name}! We're glad to see you again ü§ó",
                attendanceError: "We couldn't find a match. Please check your data or register if it's your first time.",
                offlineTitle: "Registration Saved üíæ",
                offlineDetail: "You are currently offline. We've saved your data and will send it automatically when you're back online. See you!",
                syncNotification: "Your pending registrations have been sent. Thank you!",
                placeholderInvitedBy: "Who invited you?",
                placeholderFullName: "Your full name",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "The name you registered with",
                placeholderPhoneCheck: "Optional, for a precise match",
                confirmTitle: "Verify Your Information",
                confirmSubtitle: "Is this data correct?",
                confirmYes: "Yes, register",
                confirmNo: "No, go back",
                dateSelects: { day: "Day", month: "Month", year: "Year" }
            },
            zh: { // Chino
                welcomeTitle: "ËøôÊòØÊÇ®Á¨¨‰∏ÄÊ¨°ÂèÇÂä† INVICTUS ÈùíÂπ¥Ê¥ªÂä®ÂêóÔºü ü§î",
                yesBtnText: "üòÄ ÊòØÁöÑÔºåÊàëÊòØÁ¨¨‰∏ÄÊ¨°Êù•",
                noBtnText: "üòé ‰∏çÔºåÊàë‰ª•ÂâçÊù•Ëøá",
                regSubtitle: "Ê¨¢ËøéÊù•Âà∞ INVICTUS Â§ßÂÆ∂Â∫≠ÔºÅ ü§ó",
                labelInvitedBy: "üë• ÈÇÄËØ∑‰∫∫",
                naBtn: "‰∏çÈÄÇÁî®",
                labelFullName: "üè∑Ô∏è ÂßìÂêç:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è ÊÄßÂà´:",
                genderDefault: "ÈÄâÊã©...",
                genderM: "üë® Áî∑ÊÄß",
                genderF: "üë© Â•≥ÊÄß",
                labelPhone: "üì± ÁîµËØù:",
                labelBirthDate: "üéÇ Âá∫ÁîüÊó•Êúü:",
                labelAge: "üî¢ Âπ¥ÈæÑ:",
                registerBtnText: "üöÄ Ê≥®ÂÜå!",
                registerLoaderText: "Ê≠£Âú®Â§ÑÁêÜ‰ø°ÊÅØ...",
                attSubtitle: "ÂæàÈ´òÂÖ¥ÂÜçÊ¨°ËßÅÂà∞‰Ω†ÔºÅ üòä",
                labelFullNameCheck: "üè∑Ô∏è ÂßìÂêç:",
                labelPhoneCheck: "üì± ÊÇ®ÁöÑÁîµËØùÂè∑Á†ÅÔºàÂèØÈÄâÔºâ",
                checkBtnText: "üîç Á≠æÂà∞",
                attendanceLoaderText: "Ê≠£Âú®Â§ÑÁêÜ‰ø°ÊÅØ...",
                successTitle: "Â§™Ê£í‰∫Ü!",
                welcomeBackTitle: "ÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†!",
                errorTitle: "ÂìéÂëÄ!",
                ageMismatchError: "Âπ¥ÈæÑ‰∏éÂá∫ÁîüÊó•Êúü‰∏çÁ¨¶„ÄÇËØ∑Ê£ÄÊü•ÊÇ®ÁöÑÊï∞ÊçÆ„ÄÇ",
                backToWelcomeText: "üè† ËøîÂõûÈ¶ñÈ°µ",
                backToWelcomeErrorText: "üè† ËøîÂõûÈ¶ñÈ°µ",
                registrationSuccess: "Ê¨¢ËøéÂä†ÂÖ•Â§ßÂÆ∂Â∫≠Ôºå{name}ÔºÅ‰∏äÂ∏ù‰∏∫ÊÇ®Âà∂ÂÆö‰∫Ü‰ºüÂ§ßÁöÑËÆ°Âàí ‚ú®",
                registrationWelcomeBack: "ÂæàÈ´òÂÖ¥ÂÜçÊ¨°ËßÅÂà∞‰Ω†Ôºå{name}ÔºÅÊÇ®ÁöÑÂá∫Â∏≠Â∑≤ËÆ∞ÂΩï„ÄÇ",
                attendanceSuccess: "‰∏äÂ∏ùÁà±‰Ω†Ôºå{name}ÔºÅÊàë‰ª¨ÂæàÈ´òÂÖ¥ÂÜçÊ¨°ËßÅÂà∞‰Ω† ü§ó",
                attendanceError: "Êàë‰ª¨Êâæ‰∏çÂà∞ÂåπÈÖçÈ°π„ÄÇËØ∑Ê£ÄÊü•ÊÇ®ÁöÑÊï∞ÊçÆÔºåÊàñËÄÖÂ¶ÇÊûúÊÇ®ÊòØÁ¨¨‰∏ÄÊ¨°Êù•ÔºåËØ∑Ê≥®ÂÜå„ÄÇ",
                offlineTitle: "Ê≥®ÂÜåÂ∑≤‰øùÂ≠ò üíæ",
                offlineDetail: "ÊÇ®ÂΩìÂâçÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ„ÄÇÊàë‰ª¨Â∑≤‰øùÂ≠òÊÇ®ÁöÑÊï∞ÊçÆÔºåÂπ∂‰ºöÂú®ÊÇ®ÈáçÊñ∞‰∏äÁ∫øÂêéËá™Âä®ÂèëÈÄÅ„ÄÇÂÜçËßÅÔºÅ",
                syncNotification: "ÊÇ®ÂæÖÂ§ÑÁêÜÁöÑÊ≥®ÂÜåÂ∑≤ÂèëÈÄÅ„ÄÇË∞¢Ë∞¢ÔºÅ",
                placeholderInvitedBy: "Ë∞ÅÈÇÄËØ∑‰∫Ü‰Ω†Ôºü",
                placeholderFullName: "ÊÇ®ÁöÑÂÖ®Âêç",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "ÊÇ®Ê≥®ÂÜåÊó∂‰ΩøÁî®ÁöÑÂêçÂ≠ó",
                placeholderPhoneCheck: "ÂèØÈÄâÔºå‰∏∫‰∫ÜÊõ¥Á≤æÁ°ÆÁöÑÂåπÈÖç",
                confirmTitle: "È™åËØÅÊÇ®ÁöÑ‰ø°ÊÅØ",
                confirmSubtitle: "Ëøô‰∫õÊï∞ÊçÆÊ≠£Á°ÆÂêóÔºü",
                confirmYes: "ÊòØÁöÑÔºåÊ≥®ÂÜå",
                confirmNo: "‰∏çÔºåËøîÂõû‰øÆÊîπ",
                dateSelects: { day: "Êó•", month: "Êúà", year: "Âπ¥" }
            },
            pt: { // Portugu√©s
                welcomeTitle: "√â a sua Primeira Vez no INVICTUS JUVENIL? ü§î",
                yesBtnText: "üòÄ Sim, √© a minha primeira vez",
                noBtnText: "üòé N√£o, j√° vim antes",
                regSubtitle: "Bem-vindo √† fam√≠lia INVICTUS! ü§ó",
                labelInvitedBy: "üë• Convidado Por",
                naBtn: "N/A",
                labelFullName: "üè∑Ô∏è Nome Completo:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è G√©nero:",
                genderDefault: "Selecione...",
                genderM: "üë® Masculino",
                genderF: "üë© Feminino",
                labelPhone: "üì± Telefone:",
                labelBirthDate: "üéÇ Data de Nascimento:",
                labelAge: "üî¢ Idade:",
                registerBtnText: "üöÄ Registrar-me!",
                registerLoaderText: "Processando a Informa√ß√£o...",
                attSubtitle: "Que bom te ver de novo! üòä",
                labelFullNameCheck: "üè∑Ô∏è Nome Completo:",
                labelPhoneCheck: "üì± Seu N√∫mero de Telefone (Opcional)",
                checkBtnText: "üîç Verificar Presen√ßa",
                attendanceLoaderText: "Processando a Informa√ß√£o...",
                successTitle: "Excelente!",
                welcomeBackTitle: "Que bom te ver!",
                errorTitle: "Oops!",
                ageMismatchError: "A idade n√£o corresponde √† data de nascimento. Por favor, verifique os dados.",
                backToWelcomeText: "üè† Voltar ao In√≠cio",
                backToWelcomeErrorText: "üè† Voltar ao In√≠cio",
                registrationSuccess: "Bem-vindo(a) √† fam√≠lia, {name}! Deus tem grandes planos para voc√™ ‚ú®",
                registrationWelcomeBack: "Que alegria te ver de novo, {name}! Sua presen√ßa foi marcada.",
                attendanceSuccess: "Deus te ama, {name}! Estamos felizes em te ver de novo ü§ó",
                attendanceError: "N√£o conseguimos encontrar uma correspond√™ncia. Por favor, verifique seus dados ou registre-se se for sua primeira vez.",
                offlineTitle: "Registro Salvo üíæ",
                offlineDetail: "Voc√™ est√° sem conex√£o com a internet. Salvamos seus dados e os enviaremos automaticamente quando voc√™ se conectar. At√© logo!",
                syncNotification: "Seus registros pendentes foram enviados. Obrigado!",
                placeholderInvitedBy: "Quem te convidou?",
                placeholderFullName: "Seu nome completo",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "O nome com o qual voc√™ se registrou",
                placeholderPhoneCheck: "Opcional, para maior precis√£o",
                confirmTitle: "Verifique suas Informa√ß√µes",
                confirmSubtitle: "Estes dados est√£o corretos?",
                confirmYes: "Sim, registrar",
                confirmNo: "N√£o, corrigir",
                dateSelects: { day: "Dia", month: "M√™s", year: "Ano" }
            },
            ja: { // Japon√©s
                welcomeTitle: "INVICTUS YOUTH„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅÂàù„ÇÅ„Å¶„Åß„Åô„ÅãÔºü ü§î",
                yesBtnText: "üòÄ „ÅØ„ÅÑ„ÄÅÂàù„ÇÅ„Å¶„Åß„Åô",
                noBtnText: "üòé „ÅÑ„ÅÑ„Åà„ÄÅÊù•„Åü„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô",
                regSubtitle: "INVICTUS„Éï„Ç°„Éü„É™„Éº„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ ü§ó",
                labelInvitedBy: "üë• Á¥π‰ªãËÄÖ",
                naBtn: "Ë©≤ÂΩì„Å™„Åó",
                labelFullName: "üè∑Ô∏è Ê∞èÂêç:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è ÊÄßÂà•:",
                genderDefault: "ÈÅ∏Êäû...",
                genderM: "üë® Áî∑ÊÄß",
                genderF: "üë© Â•≥ÊÄß",
                labelPhone: "üì± ÈõªË©±Áï™Âè∑:",
                labelBirthDate: "üéÇ ÁîüÂπ¥ÊúàÊó•:",
                labelAge: "üî¢ Âπ¥ÈΩ¢:",
                registerBtnText: "üöÄ ÁôªÈå≤„Åô„ÇãÔºÅ",
                registerLoaderText: "ÊÉÖÂ†±„ÇíÂá¶ÁêÜ‰∏≠...",
                attSubtitle: "„Åæ„Åü„Åä‰ºö„ÅÑ„Åß„Åç„Å¶Â¨â„Åó„ÅÑ„Åß„ÅôÔºÅ üòä",
                labelFullNameCheck: "üè∑Ô∏è Ê∞èÂêç:",
                labelPhoneCheck: "üì± ÈõªË©±Áï™Âè∑Ôºà‰ªªÊÑèÔºâ",
                checkBtnText: "üîç Âá∫Â∏≠„ÇíÁ¢∫Ë™ç",
                attendanceLoaderText: "ÊÉÖÂ†±„ÇíÂá¶ÁêÜ‰∏≠...",
                successTitle: "Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅ",
                welcomeBackTitle: "„Åä‰ºö„ÅÑ„Åß„Åç„Å¶Â¨â„Åó„ÅÑ„Åß„ÅôÔºÅ",
                errorTitle: "„Åä„Å£„Å®ÔºÅ",
                ageMismatchError: "Âπ¥ÈΩ¢„ÅåË™ïÁîüÊó•„Å®‰∏ÄËá¥„Åó„Åæ„Åõ„Çì„ÄÇ„Éá„Éº„Çø„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                backToWelcomeText: "üè† ÊúÄÂàù„Å´Êàª„Çã",
                backToWelcomeErrorText: "üè† ÊúÄÂàù„Å´Êàª„Çã",
                registrationSuccess: "„Çà„ÅÜ„Åì„Åù„ÄÅ{name}„Åï„ÇìÔºÅÁ•û„ÅØ„ÅÇ„Å™„Åü„ÅÆ„Åü„ÇÅ„Å´Á¥†Êô¥„Çâ„Åó„ÅÑË®àÁîª„ÇíÁî®ÊÑè„Åó„Å¶„ÅÑ„Åæ„Åô ‚ú®",
                registrationWelcomeBack: "„Åæ„Åü„Åä‰ºö„ÅÑ„Åß„Åç„Å¶Â¨â„Åó„ÅÑ„Åß„Åô„ÄÅ{name}„Åï„ÇìÔºÅÂá∫Â∏≠„ÅåË®òÈå≤„Åï„Çå„Åæ„Åó„Åü„ÄÇ",
                attendanceSuccess: "Á•û„ÅØ„ÅÇ„Å™„Åü„ÇíÊÑõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÅ{name}„Åï„ÇìÔºÅ„Åæ„Åü„Åä‰ºö„ÅÑ„Åß„Åç„Å¶Â¨â„Åó„ÅÑ„Åß„Åô ü§ó",
                attendanceError: "‰∏ÄËá¥„Åô„Çã„ÇÇ„ÅÆ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ„Éá„Éº„Çø„ÇíÁ¢∫Ë™ç„Åô„Çã„Åã„ÄÅÂàù„ÇÅ„Å¶„ÅÆÂ†¥Âêà„ÅØÁôªÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                offlineTitle: "ÁôªÈå≤„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„Åü üíæ",
                offlineDetail: "ÁèæÂú®„Ç™„Éï„É©„Ç§„É≥„Åß„Åô„ÄÇ„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ„Ç™„É≥„É©„Ç§„É≥„Å´Êàª„ÇäÊ¨°Á¨¨„ÄÅËá™ÂãïÁöÑ„Å´ÈÄÅ‰ø°„Åï„Çå„Åæ„Åô„ÄÇ„Åß„ÅØ„Åæ„ÅüÔºÅ",
                syncNotification: "‰øùÁïô‰∏≠„ÅÆÁôªÈå≤„ÅåÈÄÅ‰ø°„Åï„Çå„Åæ„Åó„Åü„ÄÇ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ",
                placeholderInvitedBy: "Ë™∞„Å´ÊãõÂæÖ„Åï„Çå„Åæ„Åó„Åü„ÅãÔºü",
                placeholderFullName: "„ÅÇ„Å™„Åü„ÅÆ„Éï„É´„Éç„Éº„É†",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "ÁôªÈå≤„Åó„ÅüÂêçÂâç",
                placeholderPhoneCheck: "‰ªªÊÑè„ÄÅ„Çà„ÇäÊ≠£Á¢∫„Å™ÁÖßÂêà„ÅÆ„Åü„ÇÅ",
                confirmTitle: "ÊÉÖÂ†±„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
                confirmSubtitle: "„Åì„ÅÆ„Éá„Éº„Çø„ÅØÊ≠£„Åó„ÅÑ„Åß„Åô„ÅãÔºü",
                confirmYes: "„ÅØ„ÅÑ„ÄÅÁôªÈå≤„Åó„Åæ„Åô",
                confirmNo: "„ÅÑ„ÅÑ„Åà„ÄÅ‰øÆÊ≠£„Åó„Åæ„Åô",
                dateSelects: { day: "Êó•", month: "Êúà", year: "Âπ¥" }
            },
            ko: { // Coreano
                welcomeTitle: "INVICTUS Ï≤≠ÏÜåÎÖÑÎ∂ÄÏóê Ï≤òÏùå Ïò§ÏÖ®ÎÇòÏöî? ü§î",
                yesBtnText: "üòÄ ÎÑ§, Ï≤òÏùåÏù¥ÏóêÏöî",
                noBtnText: "üòé ÏïÑÎãàÏöî, ÏôÄÎ≥∏ Ï†Å ÏûàÏñ¥Ïöî",
                regSubtitle: "INVICTUS Í∞ÄÏ°±Ïù¥ Îêú Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§! ü§ó",
                labelInvitedBy: "üë• Ï¥àÎåÄÌïú ÏÇ¨Îûå",
                naBtn: "Ìï¥Îãπ ÏóÜÏùå",
                labelFullName: "üè∑Ô∏è Ïù¥Î¶Ñ:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è ÏÑ±Î≥Ñ:",
                genderDefault: "ÏÑ†ÌÉù...",
                genderM: "üë® ÎÇ®ÏÑ±",
                genderF: "üë© Ïó¨ÏÑ±",
                labelPhone: "üì± Ï†ÑÌôîÎ≤àÌò∏:",
                labelBirthDate: "üéÇ ÏÉùÎÖÑÏõîÏùº:",
                labelAge: "üî¢ ÎÇòÏù¥:",
                registerBtnText: "üöÄ Îì±Î°ùÌïòÍ∏∞!",
                registerLoaderText: "Ï†ïÎ≥¥ Ï≤òÎ¶¨ Ï§ë...",
                attSubtitle: "Îã§Ïãú ÎßåÎÇòÏÑú Î∞òÍ∞ÄÏõåÏöî! üòä",
                labelFullNameCheck: "üè∑Ô∏è Ïù¥Î¶Ñ:",
                labelPhoneCheck: "üì± Ï†ÑÌôîÎ≤àÌò∏ (ÏÑ†ÌÉù ÏÇ¨Ìï≠)",
                checkBtnText: "üîç Ï∂úÏÑù ÌôïÏù∏",
                attendanceLoaderText: "Ï†ïÎ≥¥ Ï≤òÎ¶¨ Ï§ë...",
                successTitle: "Ï¢ãÏïÑÏöî!",
                welcomeBackTitle: "ÎßåÎÇòÏÑú Î∞òÍ∞ÄÏõåÏöî!",
                errorTitle: "Ï£ÑÏÜ°Ìï©ÎãàÎã§!",
                ageMismatchError: "ÎÇòÏù¥Í∞Ä ÏÉùÎÖÑÏõîÏùºÍ≥º ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§. Îç∞Ïù¥ÌÑ∞Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.",
                backToWelcomeText: "üè† Ï≤òÏùåÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
                backToWelcomeErrorText: "üè† Ï≤òÏùåÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
                registrationSuccess: "Í∞ÄÏ°±Ïù¥ Îêú Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§, {name}Îãò! ÌïòÎÇòÎãòÏùÄ ÎãπÏã†ÏùÑ ÏúÑÌïú ÏúÑÎåÄÌïú Í≥ÑÌöçÏùÑ Í∞ÄÏßÄÍ≥† Í≥ÑÏã≠ÎãàÎã§ ‚ú®",
                registrationWelcomeBack: "Îã§Ïãú ÎßåÎÇòÏÑú Ï†ïÎßê Í∏∞ÎªêÏöî, {name}Îãò! Ï∂úÏÑùÏù¥ Í∏∞Î°ùÎêòÏóàÏäµÎãàÎã§.",
                attendanceSuccess: "ÌïòÎÇòÎãòÏùÄ ÎãπÏã†ÏùÑ ÏÇ¨ÎûëÌïòÏã≠ÎãàÎã§, {name}Îãò! Îã§Ïãú ÎßåÎÇòÏÑú Í∏∞ÎªêÏöî ü§ó",
                attendanceError: "ÏùºÏπòÌïòÎäî Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. Îç∞Ïù¥ÌÑ∞Î•º ÌôïÏù∏ÌïòÍ±∞ÎÇò Ï≤òÏùå Ïò§ÏÖ®Îã§Î©¥ Îì±Î°ùÌï¥Ï£ºÏÑ∏Ïöî.",
                offlineTitle: "Îì±Î°ù Ï†ïÎ≥¥ Ï†ÄÏû•Îê® üíæ",
                offlineDetail: "ÌòÑÏû¨ Ïò§ÌîÑÎùºÏù∏ ÏÉÅÌÉúÏûÖÎãàÎã§. Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû•ÌñàÏúºÎ©∞, Ïò®ÎùºÏù∏ ÏÉÅÌÉúÍ∞Ä ÎêòÎ©¥ ÏûêÎèôÏúºÎ°ú Ï†ÑÏÜ°Îê©ÎãàÎã§. Îã§ÏùåÏóê Î¥¨Ïöî!",
                syncNotification: "Î≥¥Î•ò Ï§ëÏù∏ Îì±Î°ù Ï†ïÎ≥¥Í∞Ä Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§. Í∞êÏÇ¨Ìï©ÎãàÎã§!",
                placeholderInvitedBy: "ÎàÑÍ∞Ä ÎãπÏã†ÏùÑ Ï¥àÎåÄÌñàÎÇòÏöî?",
                placeholderFullName: "ÎãπÏã†Ïùò Ï†ÑÏ≤¥ Ïù¥Î¶Ñ",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "Îì±Î°ùÌïú Ïù¥Î¶Ñ",
                placeholderPhoneCheck: "ÏÑ†ÌÉù ÏÇ¨Ìï≠, Îçî Ï†ïÌôïÌïú ÏùºÏπòÎ•º ÏúÑÌï¥",
                confirmTitle: "Ï†ïÎ≥¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî",
                confirmSubtitle: "Ïù¥ Ï†ïÎ≥¥Í∞Ä ÎßûÏäµÎãàÍπå?",
                confirmYes: "ÎÑ§, Îì±Î°ùÌï©ÎãàÎã§",
                confirmNo: "ÏïÑÎãàÏöî, ÏàòÏ†ïÌï©ÎãàÎã§",
                dateSelects: { day: "Ïùº", month: "Ïõî", year: "ÎÖÑ" }
            },
            de: { // Alem√°n
                welcomeTitle: "Bist du zum ersten Mal bei INVICTUS JUGEND? ü§î",
                yesBtnText: "üòÄ Ja, ich bin zum ersten Mal hier",
                noBtnText: "üòé Nein, ich war schon einmal hier",
                regSubtitle: "Willkommen in der INVICTUS-Familie! ü§ó",
                labelInvitedBy: "üë• Eingeladen von",
                naBtn: "N/A",
                labelFullName: "üè∑Ô∏è Vollst√§ndiger Name:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è Geschlecht:",
                genderDefault: "W√§hlen...",
                genderM: "üë® M√§nnlich",
                genderF: "üë© Weiblich",
                labelPhone: "üì± Telefon:",
                labelBirthDate: "üéÇ Geburtsdatum:",
                labelAge: "üî¢ Alter:",
                registerBtnText: "üöÄ Registrieren!",
                registerLoaderText: "Informationen werden verarbeitet...",
                attSubtitle: "Sch√∂n, dich wiederzusehen! üòä",
                labelFullNameCheck: "üè∑Ô∏è Vollst√§ndiger Name:",
                labelPhoneCheck: "üì± Deine Telefonnummer (Optional)",
                checkBtnText: "üîç Anwesenheit pr√ºfen",
                attendanceLoaderText: "Informationen werden verarbeitet...",
                successTitle: "Ausgezeichnet!",
                welcomeBackTitle: "Sch√∂n, dich zu sehen!",
                errorTitle: "Hoppla!",
                ageMismatchError: "Das Alter stimmt nicht mit dem Geburtsdatum √ºberein. Bitte √ºberpr√ºfe deine Daten.",
                backToWelcomeText: "üè† Zur√ºck zum Start",
                backToWelcomeErrorText: "üè† Zur√ºck zum Start",
                registrationSuccess: "Willkommen in der Familie, {name}! Gott hat gro√üe Pl√§ne f√ºr dich ‚ú®",
                registrationWelcomeBack: "So sch√∂n, dich wiederzusehen, {name}! Deine Anwesenheit wurde vermerkt.",
                attendanceSuccess: "Gott liebt dich, {name}! Wir freuen uns, dich wiederzusehen ü§ó",
                attendanceError: "Wir konnten keine √úbereinstimmung finden. Bitte √ºberpr√ºfe deine Daten oder registriere dich, wenn du zum ersten Mal hier bist.",
                offlineTitle: "Registrierung Gespeichert üíæ",
                offlineDetail: "Du bist derzeit offline. Wir haben deine Daten gespeichert und senden sie automatisch, wenn du wieder online bist. Bis bald!",
                syncNotification: "Deine ausstehenden Registrierungen wurden gesendet. Danke!",
                placeholderInvitedBy: "Wer hat dich eingeladen?",
                placeholderFullName: "Dein vollst√§ndiger Name",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "Der Name, mit dem du dich registriert hast",
                placeholderPhoneCheck: "Optional, f√ºr eine genaue √úbereinstimmung",
                confirmTitle: "√úberpr√ºfe deine Informationen",
                confirmSubtitle: "Sind diese Daten korrekt?",
                confirmYes: "Ja, registrieren",
                confirmNo: "Nein, korrigieren",
                dateSelects: { day: "Tag", month: "Monat", year: "Jahr" }
            },
            ru: { // Ruso
                welcomeTitle: "–í—ã –≤–ø–µ—Ä–≤—ã–µ –≤ INVICTUS YOUTH? ü§î",
                yesBtnText: "üòÄ –î–∞, —è –∑–¥–µ—Å—å –≤–ø–µ—Ä–≤—ã–µ",
                noBtnText: "üòé –ù–µ—Ç, —è —É–∂–µ –±—ã–ª –∑–¥–µ—Å—å",
                regSubtitle: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–µ–º—å—é INVICTUS! ü§ó",
                labelInvitedBy: "üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω(–∞) –∫–µ–º",
                naBtn: "–ù/–î",
                labelFullName: "üè∑Ô∏è –ò–º—è –∏ –§–∞–º–∏–ª–∏—è:",
                labelGender: "‚ôÄÔ∏è‚ôÇÔ∏è –ü–æ–ª:",
                genderDefault: "–í—ã–±–µ—Ä–∏—Ç–µ...",
                genderM: "üë® –ú—É–∂—Å–∫–æ–π",
                genderF: "üë© –ñ–µ–Ω—Å–∫–∏–π",
                labelPhone: "üì± –¢–µ–ª–µ—Ñ–æ–Ω:",
                labelBirthDate: "üéÇ –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:",
                labelAge: "üî¢ –í–æ–∑—Ä–∞—Å—Ç:",
                registerBtnText: "üöÄ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è!",
                registerLoaderText: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",
                attSubtitle: "–†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–Ω–æ–≤–∞! üòä",
                labelFullNameCheck: "üè∑Ô∏è –ò–º—è –∏ –§–∞–º–∏–ª–∏—è:",
                labelPhoneCheck: "üì± –í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
                checkBtnText: "üîç –û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏–µ",
                attendanceLoaderText: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",
                successTitle: "–û—Ç–ª–∏—á–Ω–æ!",
                welcomeBackTitle: "–†–∞–¥—ã –≤–∞—Å –≤–∏–¥–µ—Ç—å!",
                errorTitle: "–û–π!",
                ageMismatchError: "–í–æ–∑—Ä–∞—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ.",
                backToWelcomeText: "üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ",
                backToWelcomeErrorText: "üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ",
                registrationSuccess: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–µ–º—å—é, {name}! –£ –ë–æ–≥–∞ –Ω–∞ –≤–∞—Å –±–æ–ª—å—à–∏–µ –ø–ª–∞–Ω—ã ‚ú®",
                registrationWelcomeBack: "–¢–∞–∫ —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–Ω–æ–≤–∞, {name}! –í–∞—à–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ.",
                attendanceSuccess: "–ë–æ–≥ –ª—é–±–∏—Ç –≤–∞—Å, {name}! –ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–Ω–æ–≤–∞ ü§ó",
                attendanceError: "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, –µ—Å–ª–∏ –≤—ã –∑–¥–µ—Å—å –≤–ø–µ—Ä–≤—ã–µ.",
                offlineTitle: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ üíæ",
                offlineDetail: "–í—ã –Ω–µ –≤ —Å–µ—Ç–∏. –ú—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏–º –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å. –î–æ –≤—Å—Ç—Ä–µ—á–∏!",
                syncNotification: "–í–∞—à–∏ –æ–∂–∏–¥–∞—é—â–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–ø–∞—Å–∏–±–æ!",
                placeholderInvitedBy: "–ö—Ç–æ –≤–∞—Å –ø—Ä–∏–≥–ª–∞—Å–∏–ª?",
                placeholderFullName: "–í–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è",
                placeholderPhone: "0000-0000",
                placeholderAge: "18",
                placeholderFullNameCheck: "–ò–º—è, —Å –∫–æ—Ç–æ—Ä—ã–º –≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å",
                placeholderPhoneCheck: "–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è",
                confirmTitle: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
                confirmSubtitle: "–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤–µ—Ä–Ω—ã?",
                confirmYes: "–î–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å",
                confirmNo: "–ù–µ—Ç, –∏—Å–ø—Ä–∞–≤–∏—Ç—å",
                dateSelects: { day: "–î–µ–Ω—å", month: "–ú–µ—Å—è—Ü", year: "–ì–æ–¥" }
            }
        };

        const supportedLangs = ['es', 'en', 'zh', 'pt', 'ja', 'ko', 'de', 'ru'];
        let currentLangIndex = 0;
        let currentLang = supportedLangs[currentLangIndex];
        let pendingRegistrationData = null;
        const screens = {
            welcome: document.getElementById('welcomeScreen'),
            registration: document.getElementById('registrationForm'),
            attendance: document.getElementById('attendanceForm'),
            success: document.getElementById('successMessage'),
            error: document.getElementById('errorMessage'),
            confirmation: document.getElementById('confirmationScreen')
        };

        const countryCodes = [
            { name: "Panam√°", code: "507", flag: "üáµüá¶", format: [4, 4] },
            { name: "USA", code: "1", flag: "üá∫üá∏", format: [3, 3, 4] },
            { name: "M√©xico", code: "52", flag: "üá≤üáΩ", format: [2, 4, 4] },
            { name: "Colombia", code: "57", flag: "üá®üá¥", format: [3, 3, 4] },
            { name: "Espa√±a", code: "34", flag: "üá™üá∏", format: [3, 3, 3] },
            { name: "Argentina", code: "54", flag: "üá¶üá∑", format: [2, 4, 4] },
            { name: "Per√∫", code: "51", flag: "üáµüá™", format: [3, 3, 3] },
            { name: "Venezuela", code: "58", flag: "üáªüá™", format: [3, 7] },
            { name: "Chile", code: "56", flag: "üá®üá±", format: [1, 4, 4] },
            { name: "Ecuador", code: "593", flag: "üá™üá®", format: [1, 3, 4] },
            { name: "Guatemala", code: "502", flag: "üá¨üáπ", format: [4, 4] },
            { name: "Cuba", code: "53", flag: "üá®üá∫", format: [1, 3, 4] },
            { name: "Bolivia", code: "591", flag: "üáßüá¥", format: [1, 7] },
            { name: "Honduras", code: "504", flag: "üá≠üá≥", format: [4, 4] },
            { name: "Paraguay", code: "595", flag: "üáµüáæ", format: [3, 6] },
            { name: "El Salvador", code: "503", flag: "üá∏üáª", format: [4, 4] },
            { name: "Nicaragua", code: "505", flag: "üá≥üáÆ", format: [4, 4] },
            { name: "Costa Rica", code: "506", flag: "üá®üá∑", format: [4, 4] },
            { name: "Puerto Rico", code: "1939", flag: "üáµüá∑", format: [3, 3, 4] },
            { name: "Uruguay", code: "598", flag: "üá∫üáæ", format: [2, 3, 3] },
            { name: "Canad√°", code: "1", flag: "üá®üá¶", format: [3, 3, 4] },
            { name: "Brasil", code: "55", flag: "üáßüá∑", format: [2, 5, 4] },
            { name: "Reino Unido", code: "44", flag: "üá¨üáß", format: [4, 6] },
            { name: "Francia", code: "33", flag: "üá´üá∑", format: [1, 2, 2, 2, 2] },
            { name: "Alemania", code: "49", flag: "üá©üá™", format: [3, 7] },
            { name: "Italia", code: "39", flag: "üáÆüáπ", format: [3, 7] },
            { name: "Portugal", code: "351", flag: "üáµüáπ", format: [3, 3, 3] },
            { name: "Jap√≥n", code: "81", flag: "üáØüáµ", format: [2, 4, 4] },
            { name: "China", code: "86", flag: "üá®üá≥", format: [3, 4, 4] },
            { name: "India", code: "91", flag: "üáÆüá≥", format: [5, 5] },
            { name: "Australia", code: "61", flag: "üá¶üá∫", format: [1, 4, 4] },
            { name: "Rusia", code: "7", flag: "üá∑üá∫", format: [3, 3, 2, 2] },
            { name: "Corea del Sur", code: "82", flag: "üá∞üá∑", format: [2, 4, 4] },
            { name: "Suiza", code: "41", flag: "üá®üá≠", format: [2, 3, 2, 2] },
            { name: "Suecia", code: "46", flag: "üá∏üá™", format: [2, 3, 2, 2] },
            { name: "Noruega", code: "47", flag: "üá≥üá¥", format: [3, 2, 3] },
            { name: "Pa√≠ses Bajos", code: "31", flag: "üá≥üá±", format: [1, 8] },
            { name: "B√©lgica", code: "32", flag: "üáßüá™", format: [3, 2, 2, 2] },
            { name: "Irlanda", code: "353", flag: "üáÆüá™", format: [2, 7] },
            { name: "Dinamarca", code: "45", flag: "üá©üá∞", format: [2, 2, 2, 2] },
            { name: "Finlandia", code: "358", flag: "üá´üáÆ", format: [2, 7] },
            { name: "Austria", code: "43", flag: "üá¶üáπ", format: [3, 7] },
            { name: "Nueva Zelanda", code: "64", flag: "üá≥üáø", format: [3, 3, 4] },
            { name: "Sud√°frica", code: "27", flag: "üáøüá¶", format: [2, 3, 4] },
            { name: "Egipto", code: "20", flag: "üá™üá¨", format: [3, 4, 4] },
            { name: "Turqu√≠a", code: "90", flag: "üáπüá∑", format: [3, 3, 4] },
            { name: "Israel", code: "972", flag: "üáÆüá±", format: [2, 3, 4] },
            { name: "Singapur", code: "65", flag: "üá∏üá¨", format: [4, 4] },
            { name: "Rep. Dominicana", code: "1809", flag: "üá©üá¥", format: [3, 3, 4] }
        ];

        function populateCountryCodes(selectId) {
            const select = document.getElementById(selectId);
            if (!select) return;
            select.innerHTML = '';
            countryCodes.forEach(country => {
                const option = document.createElement('option');
                option.value = country.code;
                option.textContent = `${country.flag} +${country.code}`;
                select.appendChild(option);
            });
            select.value = "507";
        }

        function showScreen(screenName) { Object.values(screens).forEach(screen => screen.classList.add('hidden')); screens[screenName]?.classList.remove('hidden'); }

        function updateLanguage() {
            currentLang = supportedLangs[currentLangIndex];
            const t = translations[currentLang];
            document.querySelectorAll('[data-translate]').forEach(el => { const key = el.getAttribute('data-translate'); if (t[key]) el.textContent = t[key]; });
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => { const key = el.getAttribute('data-translate-placeholder'); if (t[key]) el.placeholder = t[key]; });
            document.documentElement.lang = currentLang;

            document.querySelectorAll('#langToggle').forEach(btn => {
                btn.textContent = currentLang.toUpperCase();
            });
            populateDateSelects();
        }

        function showConfetti() { if (typeof confetti === 'function') confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } }); }
        function showLoader(loaderId, show = true) { const loader = document.getElementById(loaderId); loader.style.display = show ? 'flex' : 'none'; const button = loader.closest('.form-actions')?.querySelector('button'); if (button) button.style.display = show ? 'none' : 'block'; }
        function showSuccess(title, detail, showConfettiAnimation = true) {
            document.getElementById('successTitle').textContent = title;
            document.getElementById('successDetail').innerHTML = detail.replace(/\n/g, '<br>');
            document.getElementById('successIcon').textContent = 'üéâ';
            showScreen('success');
            if (showConfettiAnimation) showConfetti();
        }
        function showError(detailKey) { const t = translations[currentLang]; document.getElementById('errorDetail').textContent = t[detailKey] || detailKey; showScreen('error'); }
        async function submitData(formData, formElement) {
            const loaderId = formElement.id === 'regForm' ? 'registerLoader' : 'attendanceLoader';
            showLoader(loaderId, true);

            if (!navigator.onLine) {
                saveForLater(formData, formElement);
                return;
            }

            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    cache: 'no-cache',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success || result.name) {
                    const t = translations[currentLang];
                    let title, detail;
                    const gender = result.gender || formData.genero;

                    if (formData.action === 'register') {
                        title = t.successTitle;
                        detail = t.registrationSuccess;

                        // La App genera la notificaci√≥n del conector
                        const notifMsg = `üîî A ${formData.conector} se le asign√≥ como conector a ${result.name}`;

                        // Disparar notificaciones locales inmediatas
                        showPushNotification(notifMsg);

                        // Enviar notificaci√≥n a la hoja para la campana de los dem√°s
                        fetch(SCRIPT_URL, {
                            method: 'POST',
                            mode: 'cors',
                            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                            body: JSON.stringify({ action: 'addNotification', mensaje: notifMsg })
                        }).then(() => fetchNotifications());

                    } else {
                        title = t.welcomeBackTitle;
                        detail = t.attendanceSuccess;

                        // La App detecta la 4ta asistencia
                        if (result.total === 4) {
                            const notifMsg = `‚≠ê ${result.name} cumpli√≥ su 4ta asistencia`;

                            // Disparar notificaciones locales inmediatas
                            showPushNotification(notifMsg);

                            // Enviar notificaci√≥n a la hoja para la campana de los dem√°s
                            fetch(SCRIPT_URL, {
                                method: 'POST',
                                mode: 'cors',
                                headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                                body: JSON.stringify({ action: 'addNotification', mensaje: notifMsg })
                            }).then(() => fetchNotifications());
                        }
                    }

                    detail = detail.replace('{name}', result.name);

                    // Ajuste de g√©nero en espa√±ol
                    if (currentLang === 'es' && gender) {
                        if (gender.toUpperCase() === 'M') {
                            detail = detail.replace(/Bienvenido\/a|Bienvenida/g, 'Bienvenido');
                        } else if (gender.toUpperCase() === 'F') {
                            detail = detail.replace(/Bienvenido\/a|Bienvenida/g, 'Bienvenida');
                        }
                    }

                    showSuccess(title, detail);
                } else {
                    showError('attendanceError');
                }
            } catch (error) {
                console.error("Submit Error:", error);
                showError('attendanceError');
            } finally {
                showLoader(loaderId, false);
                formElement.reset();
            }
        }
        function saveForLater(formData, formElement) { const queue = JSON.parse(localStorage.getItem('offlineQueue')) || []; queue.push(formData); localStorage.setItem('offlineQueue', JSON.stringify(queue)); const loaderId = formElement.id === 'regForm' ? 'registerLoader' : 'attendanceLoader'; showLoader(loaderId, false); formElement.reset(); const t = translations[currentLang]; document.getElementById('successIcon').textContent = 'üíæ'; showSuccess(t.offlineTitle, t.offlineDetail, false); }
        async function processOfflineQueue() { const queue = JSON.parse(localStorage.getItem('offlineQueue')) || []; if (navigator.onLine && queue.length > 0) { console.log(`Processing ${queue.length} offline items...`); const submissions = queue.map(formData => fetch(SCRIPT_URL, { method: 'POST', mode: 'cors', cache: 'no-cache', headers: { 'Content-Type': 'text/plain;charset=utf-8' }, body: JSON.stringify(formData) }).catch(err => console.error('Failed to sync item:', err))); await Promise.all(submissions); localStorage.removeItem('offlineQueue'); console.log('Offline queue processed and cleared.'); } }

        function populateDateSelects() {
            const daySelect = document.getElementById('birthDay');
            const monthSelect = document.getElementById('birthMonth');
            const yearSelect = document.getElementById('birthYear');
            const t = translations[currentLang].dateSelects;

            const currentDay = daySelect.value;
            const currentMonth = monthSelect.value;
            const currentYearVal = yearSelect.value;

            yearSelect.innerHTML = `<option value="">${t.year}</option>`;
            const currentYear = new Date().getFullYear();
            for (let y = currentYear; y >= currentYear - 80; y--) {
                yearSelect.innerHTML += `<option value="${y}">${y}</option>`;
            }

            monthSelect.innerHTML = `<option value="">${t.month}</option>`;
            const monthNames = {
                es: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                en: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                zh: ["‰∏ÄÊúà", "‰∫åÊúà", "‰∏âÊúà", "ÂõõÊúà", "‰∫îÊúà", "ÂÖ≠Êúà", "‰∏ÉÊúà", "ÂÖ´Êúà", "‰πùÊúà", "ÂçÅÊúà", "ÂçÅ‰∏ÄÊúà", "ÂçÅ‰∫åÊúà"],
                pt: ["Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
                ja: ["1Êúà", "2Êúà", "3Êúà", "4Êúà", "5Êúà", "6Êúà", "7Êúà", "8Êúà", "9Êúà", "10Êúà", "11Êúà", "12Êúà"],
                ko: ["1Ïõî", "2Ïõî", "3Ïõî", "4Êúà", "5Êúà", "6Êúà", "7Êúà", "8Ïõî", "9Ïõî", "10Ïõî", "11Ïõî", "12Ïõî"],
                de: ["Januar", "Februar", "M√§rz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"],
                ru: ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å", "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"]
            }[currentLang];

            monthNames.forEach((month, index) => {
                monthSelect.innerHTML += `<option value="${index + 1}">${month}</option>`;
            });

            const year = parseInt(yearSelect.value, 10);
            const month = parseInt(monthSelect.value, 10);
            const daysInMonth = (year && month) ? new Date(year, month, 0).getDate() : 31;

            daySelect.innerHTML = `<option value="">${t.day}</option>`;
            for (let d = 1; d <= daysInMonth; d++) {
                daySelect.innerHTML += `<option value="${d}">${d}</option>`;
            }

            if (currentYearVal) yearSelect.value = currentYearVal;
            if (currentMonth) monthSelect.value = currentMonth;
            if (currentDay) daySelect.value = currentDay;
        }

        function formatPhoneNumber(input, countryCode) {
            if (input.value.toUpperCase() === 'N/A') return;

            const country = countryCodes.find(c => c.code === countryCode);
            if (!country || !country.format) {
                input.value = input.value.replace(/[^\d]/g, '');
                return;
            }

            const format = country.format;
            const maxLength = format.reduce((a, b) => a + b, 0);

            let digits = input.value.replace(/\D/g, '');
            if (digits.length > maxLength) {
                digits = digits.slice(0, maxLength);
            }

            const parts = [];
            let start = 0;
            for (const len of format) {
                const part = digits.slice(start, start + len);
                if (part.length > 0) {
                    parts.push(part);
                    start += len;
                } else {
                    break;
                }
            }
            input.value = parts.join('-');
        }

        document.getElementById('birthMonth').addEventListener('change', populateDateSelects);
        document.getElementById('birthYear').addEventListener('change', populateDateSelects);

        document.body.addEventListener('click', (e) => {
            if (e.target.closest('#langToggle')) {
                currentLangIndex = (currentLangIndex + 1) % supportedLangs.length;
                updateLanguage();
            }
        });

        ['yesBtn', 'noBtn', 'backFromRegister', 'backFromAttendance', 'backToWelcome', 'backToWelcomeError'].forEach(id => {
            document.getElementById(id).addEventListener('click', (e) => {
                e.preventDefault();
                switch (id) {
                    case 'yesBtn': showScreen('registration'); break;
                    case 'noBtn': showScreen('attendance'); break;
                    default: showScreen('welcome'); processOfflineQueue(); break;
                }
            });
        });
        document.getElementById('naBtnInvitedBy').addEventListener('click', () => { document.getElementById('invitedBy').value = 'N/A'; });
        document.getElementById('naBtnPhone').addEventListener('click', () => { document.getElementById('phone').value = 'N/A'; });

        document.getElementById('phone').addEventListener('input', (e) => {
            formatPhoneNumber(e.target, document.getElementById('countryCode').value);
        });
        document.getElementById('countryCode').addEventListener('change', () => {
            formatPhoneNumber(document.getElementById('phone'), document.getElementById('countryCode').value);
        });

        document.getElementById('phoneCheck').addEventListener('input', (e) => {
            formatPhoneNumber(e.target, document.getElementById('countryCodeCheck').value);
        });
        document.getElementById('countryCodeCheck').addEventListener('change', () => {
            formatPhoneNumber(document.getElementById('phoneCheck'), document.getElementById('countryCodeCheck').value);
        });

        const CONECTORES_HOMBRES = ["√Ångel", "Jos√© F."];
        const CONECTORES_MUJERES = ["Gabriela", "Vivian"];

        document.getElementById('regForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const day = document.getElementById('birthDay').value;
            const month = document.getElementById('birthMonth').value;
            const year = document.getElementById('birthYear').value;
            if (!day || !month || !year) {
                showError("Por favor, selecciona una fecha de nacimiento completa.");
                return;
            }
            const birthDateStr = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

            const userEnteredAge = parseInt(document.getElementById('age').value, 10);
            const birthDate = new Date(birthDateStr);
            const today = new Date();
            let calculatedAge = today.getFullYear() - birthDate.getFullYear();
            const m = today.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < (birthDate.getDate() + 1))) {
                calculatedAge--;
            }
            if (calculatedAge !== userEnteredAge) {
                showError('ageMismatchError');
                return;
            }

            const genderSelect = document.getElementById('gender');
            const formattedPhone = document.getElementById('phone').value;

            // Asignaci√≥n de conector en la App
            const lista = (genderSelect.value === 'F') ? CONECTORES_MUJERES : CONECTORES_HOMBRES;
            const conectorAsignado = lista[Math.floor(Math.random() * lista.length)];

            pendingRegistrationData = {
                action: 'register',
                invitadoPor: document.getElementById('invitedBy').value,
                nombreApellido: document.getElementById('fullName').value,
                genero: genderSelect.value,
                telefono: formattedPhone,
                fechaNacimiento: birthDateStr,
                edad: document.getElementById('age').value,
                conector: conectorAsignado
            };

            document.getElementById('confirmName').textContent = pendingRegistrationData.nombreApellido;
            document.getElementById('confirmGender').textContent = genderSelect.options[genderSelect.selectedIndex].text;
            document.getElementById('confirmPhone').textContent = pendingRegistrationData.telefono;
            document.getElementById('confirmBirthDate').textContent = `${day}/${month}/${year}`;
            document.getElementById('confirmAge').textContent = pendingRegistrationData.edad;
            document.getElementById('confirmInvitedBy').textContent = pendingRegistrationData.invitadoPor;
            showScreen('confirmation');
        });

        document.getElementById('confirmYesBtn').addEventListener('click', () => {
            if (pendingRegistrationData) {
                showScreen('registration');
                submitData(pendingRegistrationData, document.getElementById('regForm'));
                pendingRegistrationData = null;
            }
        });

        document.getElementById('confirmNoBtn').addEventListener('click', () => {
            showScreen('registration');
        });

        document.getElementById('attForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const fullNameValue = document.getElementById('fullNameCheck').value;
            const phoneValue = document.getElementById('phoneCheck').value;
            submitData({ action: 'attendance', nombreApellido: fullNameValue, telefono: phoneValue }, e.target);
        });

        window.addEventListener('online', processOfflineQueue);

        // --- L√ìGICA DE NOTIFICACIONES PUSH & AUTOM√ÅTICAS ---
        const bellBtn = document.getElementById('bellBtn');
        const notifList = document.getElementById('notifList');
        const redDot = document.getElementById('notifRedDot');
        const notifItems = document.getElementById('notifItems');

        let lastSeenNotify = localStorage.getItem('lastSeenNotify') || "";

        if (bellBtn) {
            bellBtn.onclick = (e) => {
                e.stopPropagation();
                notifList.classList.toggle('hidden');
            };
        }

        document.addEventListener('click', (e) => {
            if (notifList && !document.getElementById('notificationCenter').contains(e.target)) {
                notifList.classList.add('hidden');
            }
        });

        async function requestNotificationPermission() {
            // Verificaci√≥n silenciosa para evitar alertas molestas
            if (!("Notification" in window)) {
                console.log("Este navegador no soporta notificaciones");
                return;
            }

            // Solicitud expl√≠cita de permiso
            const permission = await Notification.requestPermission();

            if (permission === 'granted') {
                try {
                    // Esperamos a que el SW est√© listo para evitar errores de "archivo no encontrado"
                    const registration = await navigator.serviceWorker.ready;

                    // Pasamos el registro expl√≠citamente a Firebase
                    const token = await messaging.getToken({
                        vapidKey: 'BPxkBjQpzAhPJ0T-8_XiTGqzKZ5JjBGBN5eLn1S8yM92MKVHHg3RYReMlR6pUEbQDfAS_wax2pQrzx0JSqZ7kxE',
                        serviceWorkerRegistration: registration
                    });

                    console.log('FCM Token:', token);
                    alert("‚úÖ ¬°Alertas activadas correctamente! El celular vibrar√° cuando haya avisos.");
                    document.getElementById('activateNotifBtn').style.display = 'none';
                } catch (err) {
                    console.error('Error Firebase Detalle:', err);
                    if (err.toString().includes("Failed to fetch") || err.toString().includes("network")) {
                        alert("‚ö†Ô∏è BLOQUEO DE RED DETECTADO ‚ö†Ô∏è\n\n1. NO uses Modo Inc√≥gnito/Privado (Google lo bloquea).\n2. Desactiva AdBlock si tienes.\n3. Prueba con Datos M√≥viles (a veces el WiFi bloquea puertos).");
                    } else {
                        alert("‚ö†Ô∏è Error t√©cnico: " + (err.message || err) + ". \nRevisa que los 3 archivos est√©n en la misma carpeta en GitHub.");
                    }
                }
            } else {
                alert("üö´ Necesitamos tu permiso para avisarte. Por favor, dale a 'Permitir' cuando te pregunte.");
            }
        }

        // Registro de Service Worker ROBUSTO para GitHub Pages y APK
        if ('serviceWorker' in navigator) {
            // Usamos ruta relativa ./ para asegurar que cargue en subcarpetas de GitHub
            navigator.serviceWorker.register('./firebase-messaging-sw.js', { scope: './' })
                .then((reg) => console.log('‚úÖ Firebase SW Registrado con √©xito:', reg.scope))
                .catch((err) => console.error('‚ùå Error registrando SW:', err));
        }

        async function showPushNotification(mensaje) {
            console.log("Intentando mostrar notificaci√≥n:", mensaje);

            // 1. Intentar por el Motor del Celular (M√°s r√°pido y directo)
            if ('serviceWorker' in navigator && Notification.permission === "granted") {
                try {
                    const registration = await navigator.serviceWorker.ready;
                    // Usamos el showNotification del Service Worker para garantizar vibraci√≥n en Android
                    registration.showNotification("INVICTUS JUVENIL", {
                        body: mensaje,
                        icon: 'https://cdn-icons-png.flaticon.com/512/3119/3119338.png',
                        vibrate: [300, 100, 300],
                        badge: 'https://cdn-icons-png.flaticon.com/512/3119/3119338.png',
                        tag: 'invictus-alert',
                        renotify: true
                    });
                } catch (e) {
                    console.error("Fallo Service Worker Notif, usando fallback", e);
                    new Notification("INVICTUS JUVENIL", { body: mensaje });
                }
            } else {
                // 2. Si el motor falla o no est√° listo, intentar por alerta cl√°sica
                if (Notification.permission === "granted") {
                    new Notification("INVICTUS JUVENIL", { body: mensaje });
                } else {
                    // Solo mostramos alert si el usuario ya intent√≥ activarlas
                    console.log("Permiso no concedido o pendiente.");
                }
            }
            lastSeenNotify = mensaje;
            localStorage.setItem('lastSeenNotify', mensaje);
        }

        async function fetchNotifications() {
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify({ action: 'getNotifications' })
                });
                const result = await response.json();
                if (result.success && result.notifications && result.notifications.length > 0) {
                    redDot.classList.remove('hidden');

                    const latestMsg = result.notifications[0].mensaje;
                    // Solo disparar push si es un mensaje que no hemos visto
                    if (latestMsg !== lastSeenNotify) {
                        showPushNotification(latestMsg);
                        lastSeenNotify = latestMsg;
                        localStorage.setItem('lastSeenNotify', latestMsg);
                    }

                    notifItems.innerHTML = result.notifications.map((n) => `
                        <div class="notification-item" style="font-size: 13px; padding: 10px 0; border-bottom: 1px solid #f9f9f9; line-height: 1.4; color: #444; text-align: left; position: relative;">
                            <span style="display: block; padding-right: 25px;">${n.mensaje}</span>
                            <button onclick="removeNotification('${n.mensaje}', this.parentElement)" style="position: absolute; top: 10px; right: 0; background: none; border: none; color: #bbb; cursor: pointer; font-size: 16px; padding: 0 5px;">‚úï</button>
                        </div>
                    `).join('');
                } else {
                    redDot.classList.add('hidden');
                    notifItems.innerHTML = '<p style="color: #888; font-size: 14px;">No hay alertas nuevas...</p>';
                }
            } catch (e) { console.log("Error cargando notificaciones"); }
        }

        async function removeNotification(mensaje, element) {
            // Eliminaci√≥n optimista: ocultar de inmediato en la pantalla
            if (element) {
                element.style.opacity = '0.3';
                element.style.pointerEvents = 'none';
                setTimeout(() => element.remove(), 300);
            }

            try {
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify({ action: 'deleteNotification', mensaje: mensaje })
                });
                // No llamamos a fetchNotifications de inmediato para no sobrescribir la animaci√≥n
            } catch (e) {
                console.log("Error eliminando notificaci√≥n");
                fetchNotifications(); // Si falla, que vuelvan a aparecer
            }
        }

        // Inicializaci√≥n
        requestNotificationPermission();
        fetchNotifications();

        // Revisar cada 2 minutos (120000ms)
        setInterval(fetchNotifications, 120000);

        window.addEventListener('online', fetchNotifications);

        populateCountryCodes('countryCode');
        populateCountryCodes('countryCodeCheck');
        populateDateSelects();
        updateLanguage();
        showScreen('welcome');
        processOfflineQueue();

    </script>
</body>

</html>